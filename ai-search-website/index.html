<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ask Anything to AI</title>
  <style>
    :root { --max: 760px; }
    body { font-family: system-ui, Arial, sans-serif; background:#f6f7fb; margin:0; }
    header { padding:40px 16px 8px; text-align:center; }
    h1 { margin:0 0 8px; color:#222; font-size:clamp(20px,4vw,32px); }
    p.lead { color:#555; margin:0; }
    .wrap { max-width: var(--max); margin: 24px auto; padding: 0 16px 40px; }
    .bar { display:flex; gap:8px; align-items:center; }
    input[type="text"]{ flex:1; padding:12px 14px; border:1px solid #d1d5db; border-radius:10px; font-size:16px; }
    button { padding:12px 16px; border:0; border-radius:10px; cursor:pointer; background:#111827; color:#fff; font-weight:600; }
    button:disabled { opacity:.6; cursor:not-allowed; }
    #result { margin-top:18px; background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:16px; min-height:64px; white-space:pre-wrap; }
    .muted { color:#6b7280; }
    footer { text-align:center; padding:24px; color:#9ca3af; font-size:14px; }
  </style>
</head>
<body>
  <header>
    <h1>Ask Anything to AI</h1>
    <p class="lead">Type your question below and get an AI‑generated answer.</p>
  </header>

  <main class="wrap">
    <div class="bar">
      <input id="q" type="text" placeholder="Type your question…" />
      <button id="go">Ask</button>
    </div>
    <div id="result" class="muted">No query yet. Try asking something like: "Summarize the causes of hypothyroidism"</div>
  </main>

  <footer>Built with Vercel Functions + OpenAI</footer>

  <script>
    const q = document.getElementById('q');
    const go = document.getElementById('go');
    const out = document.getElementById('result');

    async function ask() {
      const message = q.value.trim();
      if (!message) return;
      go.disabled = true;
      out.textContent = 'Thinking…';

      try {
        const res = await fetch('/api/ask', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message }),
        });
        const data = await res.json();
        if (!res.ok) throw new Error(data.error || 'Request failed');
        out.textContent = data.reply;
      } catch (err) {
        out.textContent = '⚠️ ' + (err.message || 'Something went wrong');
      } finally {
        go.disabled = false;
      }
    }

    go.addEventListener('click', ask);
    q.addEventListener('keydown', (e) => { if (e.key === 'Enter') ask(); });
  </script>
</body>
</html>
